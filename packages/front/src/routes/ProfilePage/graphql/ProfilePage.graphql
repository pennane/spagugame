fragment ProfilePageUserStats on UserStats {
  _id
  userId
  gameType
  totalWins
  totalPlayed
  elo
}

fragment ProfilePageUserAchievement on Achievement {
  _id
  name
  description
  criteria {
    ... on OtherUnlockCriteria {
      gameType
    }
    ... on TotalWinsUnlockCriteria {
      gameType
      wins
    }
    ... on WinStreakUnlockCriteria {
      gameType
      streak
    }
    ... on TotalPlayedUnlockCriteria {
      gameType
      played
    }
    ... on LeaderboardRankUnlockCriteria {
      gameType
      rank
    }
  }
}

fragment ProfilePageUserPlayedGame on PlayedGame {
  _id
  gameType
  playerIds
  playerScores
  playerElosBefore
  playerElosAfter
  startedAt
  finishedAt
  finalState
  ongoingGameId
}

query ProfilePageUser($userId: ID!) {
  user(id: $userId) {
    _id
    githubId
    userName
    stats {
      ...ProfilePageUserStats
    }
    playedGames {
      ...ProfilePageUserPlayedGame
    }
    achievements {
      ...ProfilePageUserAchievement
    }
  }
}
